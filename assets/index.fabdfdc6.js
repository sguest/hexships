var Le=Object.defineProperty,Fe=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var oe=(e,t,i)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,p=(e,t)=>{for(var i in t||(t={}))Ee.call(t,i)&&oe(e,i,t[i]);if(be)for(var i of be(t))Re.call(t,i)&&oe(e,i,t[i]);return e},x=(e,t)=>Fe(e,Oe(t));var I=(e,t,i)=>(oe(e,typeof t!="symbol"?t+"":t,i),i);import{c as M,j as g,R as ke,a as l,r as f,F,l as Ge,b as De,d as $e}from"./vendor.dc3d6da2.js";const Ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}};Ae();var me=(e=>(e[e.positiveX=0]="positiveX",e[e.positiveY=1]="positiveY",e[e.positiveZ=2]="positiveZ",e[e.negativeX=3]="negativeX",e[e.negativeY=4]="negativeY",e[e.negativeZ=5]="negativeZ",e))(me||{});const We={[0]:{x:1,y:0},[1]:{x:0,y:1},[2]:{x:-1,y:1},[3]:{x:-1,y:0},[4]:{x:0,y:-1},[5]:{x:1,y:-1}};function j(e){return We[e]}function ve(){return[0,1,2,3,4,5]}function w(...e){const t={x:0,y:0};for(const i of e)t.x+=i.x,t.y+=i.y;return t}function L(e,t){return{x:e.x*t,y:e.y*t}}function z(e,t){return e.x===t.x&&e.y===t.y}function J(e,t){e.moveTo(t.x,t.y)}function ee(e,t){e.lineTo(t.x,t.y)}const ge=Math.sqrt(3);function G(e){return 140/e}function Z(e,t){return{x:1.5*e.x*G(t),y:(e.y+.5*e.x)*G(t)*ge}}function Ce(e,t){const i=Z(e,t);return[...Array(6).keys()].map(n=>{const a=Math.PI/3*n;return{x:i.x+G(t)*Math.cos(a),y:i.y+G(t)*Math.sin(a)}})}function je(e){return{x:e*3*G(e),y:e*2*G(e)*ge}}function Ve(e){const t=-e.x-e.y;let i=Math.round(e.x),n=Math.round(e.y);const a=Math.round(t),s=Math.abs(i-e.x),r=Math.abs(n-e.y),c=Math.abs(a-t);return s>r&&s>c?i=-n-a:r>c&&(n=-i-a),{x:i,y:n}}function Xe(e,t){return Ve({x:e.x*2/3/G(t),y:(e.x*-1/3+e.y*ge/3)/G(t)})}function B(e,t){const i=-e.x-e.y;return e.x>-t&&e.x<t&&e.y>-t&&e.y<t&&i>-t&&i<t}function Ye(e){const t=[];for(let i=-e+1;i<e;i++)for(let n=-e+1;n<e;n++)B({x:i,y:n},e)&&t.push({x:i,y:n});return t}function qe(e,t){return ve().map(i=>{const n=j(i);return w(e,n)}).filter(i=>B(i,t))}function q(e){const t=j(e.facing);let i={x:e.x,y:e.y};const n=[{x:e.x,y:e.y}];for(let a=1;a<e.size;a++)i=w(i,t),n.push(i);return n}function we(e,t,i){const n=q(e),a=t.map(s=>q(s)).flat();for(const s of n){if(!B(s,i))return!1;for(const r of a)if(z(s,r))return!1}return!0}function ue(e,t){for(let i=0;i<e.length;i++)if(!we(e[i],e.slice(i+1),t))return!1;return!0}var R=(e=>(e[e.Hit=0]="Hit",e[e.Miss=1]="Miss",e))(R||{});function ze(e){return e.filter(t=>t.hits===t.size)}function fe(e,t){return e.shotPerShip?t.ownShips.length-ze(t.ownShips).length:e.shots}class Ze{constructor(t,i){I(this,"players");I(this,"activePlayerId");this.gameSettings=t,this.subscriber=i,this.players=[{ships:[],mines:[],markers:[],active:!0},{ships:[],mines:[],markers:[],active:!0}],this.activePlayerId=0}getLocalState(t){const i=+!t,n=this.playerLost(i),a=this.playerLost(t),s=a||n;return{ownShips:this.players[t].ships,ownMarkers:this.players[t].markers,ownMines:this.players[t].mines,opponentShips:s?this.players[i].ships:void 0,opponentMarkers:this.players[i].markers,opponentMines:this.players[i].mines.filter(r=>s||this.players[t].markers.some(c=>z(r,c))),isOwnTurn:t===this.activePlayerId&&!!this.players[t].ships.length,sunkEnemies:ze(this.players[i].ships).map(r=>r.definitionId),gameWon:n,gameLost:a,opponentShipsPlaced:!!this.players[i].ships.length,opponentLeft:!this.players[i].active}}playerLost(t){const i=this.players[t];return!i.active||!!i.ships.length&&i.ships.every(n=>n.hits===n.size)}validateShipPlacement(t){const i=this.gameSettings.ships.slice(0),n=[];for(const a of t){const s=i.findIndex(c=>c.id===a.definitionId);if(s===-1)return[];const r=i[s];n.push({x:a.x,y:a.y,size:r.size,facing:a.facing,hits:0,name:r.name,definitionId:a.definitionId}),i.splice(s,1)}return i.length?[]:ue(n,this.gameSettings.gridSize)?n:[]}validateMinePlacement(t,i){if(t.length!==this.gameSettings.mines)return!1;const n=i.map(a=>q(a)).flat();for(const a of t)if(n.some(s=>z(s,a))||t.some(s=>s!==a&&z(a,s))||!B(a,this.gameSettings.gridSize))return!1;return!0}setFleet(t,i){if(!this.players[t])return;const n=this.validateShipPlacement(i.ships);n.length&&this.validateMinePlacement(i.mines,n)?(this.players[t].ships=n,this.players[t].mines=i.mines.slice(),this.allShipsPlaced()?this.broadcastState():this.sendState(t)):this.sendState(t)}tryHit(t,i){for(const n of t)for(const a of q(n))if(z(a,i))return n.hits++,!0;return!1}fireShots(t,i){const n=this.players[t],a=this.getLocalState(t),s=+!t;if(this.activePlayerId===t&&!this.playerLost(t)&&!this.playerLost(s)&&this.allShipsPlaced()&&i.length===fe(this.gameSettings,a)&&i.every(c=>!!c&&B(c,this.gameSettings.gridSize)&&!n.markers.some(o=>z(o,c))&&!i.some(o=>o!==c&&z(c,o)))){let c=!1;for(const o of i){const d=this.tryHit(this.players[s].ships,o);if(n.markers.push({x:o.x,y:o.y,type:d?R.Hit:R.Miss}),c=c||d,this.players[s].mines.some(m=>z(m,o)))for(const m of[...qe(o,this.gameSettings.gridSize),o])this.players[s].markers.some(u=>z(u,m))||this.players[s].markers.push({x:m.x,y:m.y,type:this.tryHit(this.players[t].ships,m)?R.Hit:R.Miss})}(!this.gameSettings.streak||!c)&&(this.activePlayerId=s),this.broadcastState()}else this.sendState(t)}leaveGame(t){const i=+!t;!this.playerLost(t)&&!this.playerLost(i)&&(this.players[t].active=!1,this.broadcastState())}sendState(t){this.subscriber(t,this.getLocalState(t))}broadcastState(){for(let t=0;t<this.players.length;t++)this.sendState(t)}allShipsPlaced(){return this.players.every(t=>t.ships.length)}}function X(e,t){return Math.floor(Math.random()*(t-e+1))+e}function _e(e){const t=Object.keys(e).map(a=>Number.parseInt(a)).filter(a=>!Number.isNaN(a)),i=Math.floor(Math.random()*t.length);return t[i]}class Qe{constructor(t){I(this,"ownShots",[]);I(this,"ownShotCount",0);I(this,"priorityHits",[]);I(this,"trackedHits",[]);I(this,"sunkShips",[]);this.gameSettings=t}generateFleet(){const t=[],i=-this.gameSettings.gridSize,n=-this.gameSettings.gridSize,a=this.gameSettings.gridSize,s=this.gameSettings.gridSize;for(const o of this.gameSettings.ships){let d;do d={size:o.size,name:o.name,x:X(i,a),y:X(n,s),facing:_e(me),hits:0,definitionId:o.id};while(!ue([...t,d],this.gameSettings.gridSize));t.push(d)}const r=[],c=t.map(q).flat();for(let o=0;o<this.gameSettings.mines;o++){let d;do d={x:X(i,a),y:X(n,s)};while(!B(d,this.gameSettings.gridSize)||r.some(m=>z(m,d)||c.some(u=>z(u,d))));r.push(d)}return{ships:t,mines:r}}updateState(t){var i,n;if(!!((i=t.ownMarkers)==null?void 0:i.length))for(;t.ownMarkers.length>this.ownShotCount;){const a=t.ownMarkers[this.ownShotCount];if(this.ownShots[a.x]=this.ownShots[a.x]||[],this.ownShots[a.x][a.y]===void 0&&(this.ownShots[a.x][a.y]=a.type,a.type===R.Hit)){if(t.sunkEnemies.length===this.sunkShips.length)this.priorityHits.push(a),this.trackedHits.push(a);else for(const s of t.sunkEnemies)if(this.sunkShips.indexOf(s)===-1){this.sunkShips.push(s);const r=(n=this.gameSettings.ships.find(c=>c.id===s))==null?void 0:n.size;if(r){let c=!1;for(let o=0;o<6;o++)if(!c){const d=j(o);let m=a;const u=[m];for(let h=0;h<r;h++)m=w(m,d),this.trackedHits.find(k=>z(k,m))&&u.push(m);if(u.length===r){c=!0;for(const h of u){let y=this.trackedHits.findIndex(k=>z(k,h));y!==-1&&this.trackedHits.splice(y,1),y=this.priorityHits.findIndex(k=>z(k,h)),y!==-1&&this.priorityHits.splice(y,1)}}}}}}this.ownShotCount++}}getShots(t){const i=[];for(;this.priorityHits.length;){const r=this.priorityHits[0],c=ve();for(;c.length;){const d=c.splice(X(0,c.length-1),1)[0];let m=j(d);const u=w(r,m);let h=r;if(this.trackedHits.find(y=>z(y,u))){for(;this.getOwnShot(h)===R.Hit&&B(h,this.gameSettings.gridSize);)h=w(h,m);for(;this.getOwnShot(h)===void 0&&B(h,this.gameSettings.gridSize);)i.push(h),h=w(h,m);for(h=r,m=j((d+3)%6);this.getOwnShot(h)===R.Hit&&B(h,this.gameSettings.gridSize);)h=w(h,m);for(;this.getOwnShot(h)===void 0&&B(h,this.gameSettings.gridSize);)i.push(h),h=w(h,m)}}if(i.length>=t)return i.slice(0,t);const o=[];for(let d=0;d<6;d++){const m=j(d),u=w(r,m);this.getOwnShot(u)===void 0&&B(u,this.gameSettings.gridSize)&&o.push(u)}for(;o.length;)i.push(o.splice(X(0,o.length-1),1)[0]);if(i.length>=t)return i.slice(0,t);this.priorityHits.splice(0,1)}const n=this.gameSettings.ships.filter(r=>!this.sunkShips.some(c=>r.id===c)),a=Math.min(...n.map(r=>r.size)),s=[];for(let r=-this.gameSettings.gridSize;r<=this.gameSettings.gridSize;r++)for(let c=-this.gameSettings.gridSize;c<=this.gameSettings.gridSize;c++){const o={x:r,y:c};if(B(o,this.gameSettings.gridSize)&&this.getOwnShot(o)===void 0)for(let d=0;d<3;d++){const m=j(d);let u=!0;const h=[o];let y=o;for(let k=1;k<a;k++){y=w(y,m);const O=this.getOwnShot(y);!B(y,this.gameSettings.gridSize)||O===R.Miss?u=!1:O===void 0&&h.push(y)}u&&s.push(...h)}}for(;i.length<t;)i.push(s.splice(X(0,s.length-1),1)[0]);return i}getOwnShot(t){return this.ownShots[t.x]&&this.ownShots[t.x][t.y]}}const re=0,pe=1;class Ke{constructor(t){I(this,"stateSubscriptions");I(this,"gameManager");I(this,"aiPlayer");this.gameSettings=t,this.stateSubscriptions=[],this.gameManager=new Ze(t,(i,n)=>this.sendState(i,n)),this.aiPlayer=new Qe(t)}onStateChange(t){this.stateSubscriptions.push(t)}offStateChange(t){const i=this.stateSubscriptions.indexOf(t);i>=0&&this.stateSubscriptions.splice(i,1)}setFleet(t){this.gameManager.setFleet(re,t),this.gameManager.setFleet(pe,this.aiPlayer.generateFleet())}fireShots(t){this.gameManager.fireShots(re,t)}leaveGame(){}getSettings(){return this.gameSettings}sendState(t,i){t===re?this.stateSubscriptions.forEach(n=>n(i)):(this.aiPlayer.updateState(i),i.isOwnTurn&&!i.gameLost&&!i.gameWon&&setTimeout(()=>{this.takeEnemyShot(i)},1e3))}takeEnemyShot(t){this.gameManager.fireShots(pe,this.aiPlayer.getShots(fe(this.gameSettings,t)))}}class Ue{constructor(t,i){I(this,"stateSubscriptions");this.socket=t,this.gameSettings=i,this.stateSubscriptions=[],this.socket.on("update-state",n=>{this.stateSubscriptions.forEach(a=>a(n))})}onStateChange(t){this.stateSubscriptions.push(t)}offStateChange(t){const i=this.stateSubscriptions.indexOf(t);i>=0&&this.stateSubscriptions.splice(i,1)}setFleet(t){this.socket.emit("set-fleet",t)}fireShots(t){this.socket.emit("fire-shots",t)}leaveGame(){this.socket.emit("leave-game")}getSettings(){return this.gameSettings}}function Ne(e){var t,i;if(!e.shotPerShip&&e.shots<1||e.mines<0||!((t=e.ships)==null?void 0:t.length))return!1;for(const n of e.ships)if(!((i=n.name)==null?void 0:i.trim())||n.size<1)return!1;return!0}const K={ships:[{id:1,size:2,name:"Patrol Boat"},{id:2,size:3,name:"Destroyer"},{id:3,size:3,name:"Submarine"},{id:4,size:4,name:"Battleship"},{id:5,size:5,name:"Aircraft Carrier"}],gridSize:7,streak:!1,shots:1,shotPerShip:!1,mines:0};var Y=(e=>(e[e.Basic=0]="Basic",e[e.Streak=1]="Streak",e[e.Barrage=2]="Barrage",e[e.Salvo=3]="Salvo",e[e.Minefield=4]="Minefield",e[e.Custom=5]="Custom",e))(Y||{});const te={title:"Basic",id:0,description:"Basic rules with no modifications",settings:K},Je={title:"Streak",id:1,description:"Fire again after landing a hit",settings:x(p({},K),{streak:!0})},et={title:"Barrage",id:2,description:"Fire 4 shots each turn",settings:x(p({},K),{shots:4})},tt={title:"Salvo",id:3,description:"Fire 1 shot for each surviving ship",settings:x(p({},K),{shotPerShip:!0})},it={title:"Minefield",id:4,description:"Place 5 mines that explode when hit by the enemy, damaging enemy ships",settings:x(p({},K),{mines:5})},Me={title:"Custom",id:5,description:"Custom settings"},Te={[0]:te,[1]:Je,[2]:et,[3]:tt,[4]:it,[5]:Me};function ce(e){return Te[e]}function Pe(){return Object.values(Te).filter(e=>!!e.settings)}const C="#ccc",_=["Big Shoulders Stencil Text","sans-serif"],Q={fontSize:"1.2rem",border:"2px solid black",padding:{top:4,bottom:4,left:10,right:10},cursor:"pointer",color:C,backgroundColor:"#333","&:hover":{backgroundColor:"#555"},"&:disabled":{cursor:"default",backgroundColor:"#999"}},de={border:`1px solid ${C}`,background:"transparent",color:C,padding:3,fontSize:"1rem","& option":{backgroundColor:"#022866"},"&:disabled":{backgroundColor:"#ccc",color:"#666"}},xe={fontSize:"1.6rem",border:"2px solid black",padding:{top:4,bottom:4,left:10,right:10},cursor:"pointer"},nt=M({buttonContainer:{display:"flex",justifyContent:"space-between"},okButton:x(p({},xe),{"&:hover":{backgroundColor:"white"}}),cancelButton:x(p({},xe),{color:C,backgroundColor:"#333","&:hover":{backgroundColor:"#555"}})}),st={content:{border:"3px solid #ccc",display:"inline-block",background:"#333",color:"white",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:20,fontSize:"1.5rem",fontFamily:"sans-serif",inset:"50% auto auto 50%"},overlay:{zIndex:999}};function Be(e){const t=nt(),i=()=>{e.onClose(),e.onOk&&e.onOk()};return g(ke,{isOpen:!0,onRequestClose:e.onClose,style:st,children:[l("p",{children:e.children}),g("div",{className:t.buttonContainer,children:[e.okButton&&l("button",{className:t.okButton,onClick:i,children:"OK"}),e.cancelButton&&l("button",{className:t.cancelButton,onClick:e.onClose,children:"Cancel"})]})]})}const at=M({tooltip:{fontSize:"1.5rem",cursor:"pointer",marginLeft:"20px",color:"#cfc",border:"none",background:"transparent"}});function Se(e){const t=at(),[i,n]=f.exports.useState(!1);return g(F,{children:[i&&l(Be,{okButton:!0,onClose:()=>n(!1),children:e.children}),l("button",{className:t.tooltip,onClick:()=>n(!0),type:"button",children:"(?)"})]})}const ot=M({menu:{margin:0,padding:{left:20},listStyleType:"none"},menuButton:{background:"transparent",border:"none",fontFamily:_,color:C,fontSize:"1.5rem",cursor:"pointer","&:hover":{color:"#fff"}}});function rt(e){const t=ot();return l("ul",{className:t.menu,children:e.items.filter(i=>i.condition===void 0||i.condition).map(i=>g("li",{children:[l("button",{className:t.menuButton,onClick:i.onClick,children:i.text}),i.tooltip&&l(Se,{children:i.tooltip})]},i.text))})}const lt=M({label:{color:C,fontSize:"1.1rem",fontFamily:"sans-serif",display:"flex",justifyContent:"space-between",alignItems:"flex-start",margin:{bottom:15}},input:x(p({},de),{width:200,boxSizing:"border-box",maxWidth:"100%",flexShrink:0}),checkbox:{width:20,height:20},addButton:{background:"transparent",border:"none",color:"green",fontSize:"1.5rem",cursor:"pointer",display:"block",marginBottom:10},deleteButton:{background:"transparent",border:"none",color:"red",fontSize:"1.1rem",cursor:"pointer"},shipsHeader:{color:C,fontSize:"1.4rem",fontFamily:"sans-serif"},shipList:{listStyleType:"none",padding:0,margin:0,color:C,fontFamily:"sans-serif",fontSize:"1.1rem","& li":{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},"& input":de},sizeInput:{maxWidth:100},nameInput:{marginRight:20}});function He(e){const t=lt(),i=s=>{const r=e.settings.ships.findIndex(o=>o.id===s.id),c=e.settings.ships.slice();c[r]=s,e.onSettingsChanged(x(p({},e.settings),{ships:c}))},n=()=>{e.onSettingsChanged(x(p({},e.settings),{ships:[...e.settings.ships,{id:Math.max(...e.settings.ships.map(s=>s.id))+1,name:"",size:2}]}))},a=s=>{const r=e.settings.ships.slice();r.splice(r.findIndex(c=>c.id===s),1),e.onSettingsChanged(x(p({},e.settings),{ships:r}))};return g(F,{children:[g("label",{className:t.label,children:["Number of shots per turn",l("input",{className:t.input,type:"number",min:"1",value:e.settings.shots,onChange:s=>e.onSettingsChanged(x(p({},e.settings),{shots:parseInt(s.target.value)})),disabled:e.settings.shotPerShip})]}),g("label",{className:t.label,children:["One shot per remaining ship",l("input",{className:t.checkbox,type:"checkbox",checked:e.settings.shotPerShip,onChange:s=>e.onSettingsChanged(x(p({},e.settings),{shotPerShip:s.target.checked}))})]}),g("label",{className:t.label,children:["Fire again on hit",l("input",{className:t.checkbox,type:"checkbox",checked:e.settings.streak,onChange:s=>e.onSettingsChanged(x(p({},e.settings),{streak:s.target.checked}))})]}),g("label",{className:t.label,children:["Number of mines",l("input",{className:t.input,type:"number",min:"0",value:e.settings.mines,onChange:s=>e.onSettingsChanged(x(p({},e.settings),{mines:parseInt(s.target.value)}))})]}),g("label",{className:t.label,children:["Field size - tiles from center to corner",l("input",{className:t.input,type:"number",min:"1",value:e.settings.gridSize,onChange:s=>e.onSettingsChanged(x(p({},e.settings),{gridSize:parseInt(s.target.value)}))})]}),l("p",{className:t.shipsHeader,children:"Ships"}),l("ul",{className:t.shipList,children:e.settings.ships.map(s=>g("li",{children:[g("label",{children:["Name ",l("input",{className:t.nameInput,type:"text",value:s.name,onChange:r=>i(x(p({},s),{name:r.target.value}))})]}),g("label",{children:["Size ",l("input",{className:t.sizeInput,type:"number",value:s.size,min:1,onChange:r=>i(x(p({},s),{size:parseInt(r.target.value)}))})]}),l("button",{className:t.deleteButton,type:"button",onClick:()=>a(s.id),children:"X"})]},s.id))}),l("button",{className:t.addButton,type:"button",onClick:n,children:"+"})]})}const ct=M({form:{padding:{left:20,right:20},maxWidth:500},label:{color:C,fontSize:"1.1rem",fontFamily:"sans-serif",display:"flex",justifyContent:"space-between",alignItems:"flex-start",margin:{bottom:15}},input:x(p({},de),{width:200,boxSizing:"border-box",maxWidth:"100%",flexShrink:0}),button:x(p({},Q),{"&:first-of-type":{marginRight:20}})});function dt(e){const t=ct(),[i,n]=f.exports.useState(Y.Basic),[a,s]=f.exports.useState(te.settings),[r,c]=f.exports.useState(""),o=()=>{e.onCreated(r,i,a)};let d=!0;return r.trim()||(d=!1),i===Y.Custom&&!Ne(a)&&(d=!1),g("form",{className:t.form,children:[g("label",{className:t.label,children:["Game Name",l("input",{className:t.input,type:"text",value:r,onChange:m=>c(m.target.value)})]}),g("label",{className:t.label,children:["Game Mode",l(Se,{children:ce(i).description}),l("select",{className:t.input,value:i,onChange:m=>n(parseInt(m.target.value)),"data-testid":"gamemode",children:[...Pe(),Me].map(m=>l("option",{value:m.id,children:m.title},m.id))})]}),i===Y.Custom&&l(F,{children:l(He,{onSettingsChanged:s,settings:a})}),l("button",{className:t.button,onClick:o,disabled:!d,type:"button",children:"Create"}),l("button",{className:t.button,onClick:()=>e.onCancel(),type:"button",children:"Cancel"})]})}const ht=M({item:{fontSize:"1rem",margin:{top:4,bottom:4}}});function mt(e){const t=ht(),i=(a,s)=>a.name===s.name&&a.size===s.size,n=e.settings.ships.length===5&&e.settings.ships.every((a,s)=>i(a,te.settings.ships[s]));return g(F,{children:[l("p",{className:t.item,children:"Differences from basic rules:"}),e.settings.shotPerShip&&l("p",{className:t.item,children:"1 shot per surviving ship"}),!e.settings.shotPerShip&&e.settings.shots>1&&g("p",{className:t.item,children:[e.settings.shots," shots per turn"]}),e.settings.streak&&l("p",{className:t.item,children:"Fire again after a hit"}),e.settings.mines>0&&g("p",{className:t.item,children:[e.settings.mines," mines"]}),!n&&g("p",{className:t.item,children:["Ships",l("ul",{children:e.settings.ships.map(a=>g("li",{children:[a.name," (size ",a.size,")"]},a.id))})]})]})}const gt=M({button:Q,noGamesMessage:{color:C,size:"2rem",fontFamily:"sans-serif",marginLeft:20},list:{listStyle:"none",padding:0,margin:20},game:{border:`1px solid ${C}`,padding:15,width:"100%",maxWidth:400,marginBottom:10},info:{margin:{top:0,bottom:5},color:C,fontSize:"1.2rem",fontFamily:"sans-serif"}});function ut(e){var i;const t=gt();return g(F,{children:[!e.games&&l("p",{className:t.noGamesMessage,children:"Loading game list..."}),!!e.games&&!e.games.length&&l("p",{className:t.noGamesMessage,children:"No games found"}),!!((i=e.games)==null?void 0:i.length)&&l("ul",{className:t.list,children:!!e.games&&e.games.map(n=>g("li",{className:t.game,children:[g("p",{className:t.info,children:["Name: ",n.definition.name]}),g("p",{className:t.info,children:["Mode: ",ce(n.definition.mode).title,l(Se,{children:n.definition.mode===Y.Custom?l(mt,{settings:n.definition.settings}):ce(n.definition.mode).description})]}),l("button",{className:t.button,onClick:()=>e.onSelected(n),children:"Join"})]},n.id))})]})}const ft=M({heading:{fontFamily:_,color:C,fontSize:"3rem",margin:0,padding:{top:10,bottom:10,left:20}},statusText:{fontFamily:_,color:C,fontSize:"1.5rem",padding:{left:20}},buttonStyle:x(p({},Q),{margin:{left:20}}),singlePlayerCustom:{padding:{left:20,right:20},maxWidth:500},playButton:Q});function St(e){const t=ft(),[i,n]=f.exports.useState(0),[a,s]=f.exports.useState(void 0),[r,c]=f.exports.useState(te.settings),{socket:o,onNewGame:d}=e;f.exports.useEffect(()=>(o==null||o.on("join-game",S=>{d(new Ue(o,S))}),()=>{o==null||o.removeAllListeners("join-game")}),[d,o]),f.exports.useEffect(()=>(o==null||o.on("add-lobby-game",S=>{a?a.findIndex(T=>T.id===S.id)===-1&&s([...a,S]):s([S])}),o==null||o.on("remove-lobby-game",S=>{if(a){const T=a.findIndex(E=>E.id===S);if(T>=0){const E=a.slice();E.splice(T),s(E)}}}),()=>{o==null||o.removeAllListeners("add-lobby-game"),o==null||o.removeAllListeners("remove-lobby-game")}),[o,a]);const m=S=>{n(5),o==null||o.emit("quick-connect",S)},u=()=>{o==null||o.emit("cancel-quick-connect"),n(4)},h=(S,T,E)=>{T===Y.Custom?E&&(n(7),o==null||o.emit("add-custom-lobby-game",S,E)):(n(7),o==null||o.emit("add-standard-lobby-game",S,T))},y=()=>{o==null||o.emit("remove-lobby-game"),n(3)},k=()=>{o==null||o.emit("enter-lobby",S=>{s(S)}),n(8)},O=S=>{o==null||o.emit("join-lobby-game",S.id)},D=S=>{e.onNewGame(new Ke(S))},W=S=>Pe().map(T=>({text:T.title,onClick:()=>S(T),tooltip:T.description}));let H=[];return i===0?H=[{text:"Versus AI",onClick:()=>n(1)},{text:"Multiplayer",onClick:()=>n(3),condition:e.isConnected}]:i===1?H=[...W(S=>D(S.settings)),{text:"Custom",onClick:()=>n(2)},{text:"Back",onClick:()=>n(0)}]:i===3?H=[{text:"Quick Match",onClick:()=>n(4)},{text:"Create Game",onClick:()=>n(6)},{text:"Find Game",onClick:k},{text:"Back",onClick:()=>n(0)}]:i===4&&(H=[...W(S=>m(S.id)),{text:"Back",onClick:()=>n(3)}]),g(F,{children:[l("h1",{className:t.heading,children:"Hexships"}),!!H.length&&l(rt,{items:H}),i===2&&g("form",{className:t.singlePlayerCustom,children:[l(He,{onSettingsChanged:c,settings:r}),l("button",{className:t.playButton,onClick:()=>r&&D(r),disabled:!Ne(r),type:"button",children:"Play"}),l("button",{className:t.buttonStyle,onClick:()=>n(1),type:"button",children:"Cancel"})]}),i===5&&g(F,{children:[l("p",{className:t.statusText,children:"Searching for opponent..."}),l("button",{className:t.buttonStyle,onClick:u,children:"Cancel"})]}),i===6&&l(dt,{onCreated:h,onCancel:()=>n(3)}),i===7&&g(F,{children:[l("p",{className:t.statusText,children:"Waiting for opponent..."}),l("button",{className:t.buttonStyle,onClick:y,children:"Cancel"})]}),i===8&&g(F,{children:[l("button",{className:t.buttonStyle,onClick:()=>n(3),children:"Back"}),l(ut,{games:a,onSelected:S=>O(S)})]})]})}function ie(e,t,i){const n=e.current;if(!n)return;const a=n.getContext("2d");!a||(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,n.width,n.height),a.scale(t,t),i(a))}const yt=M({"@keyframes boardGradient":{from:{backgroundPosition:"0% 50%"},to:{backgroundPosition:"100% 50%"}},canvas:{animationName:"$boardGradient",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"ease",animationDirection:"alternate",position:"absolute",zIndex:1,pointerEvents:"none",background:"linear-gradient(80deg, #00545c 0%, #00405c 30%, #00545c 60%, #00405c 90%)",backgroundSize:"400% 400%",border:"5px solid #242f40",boxSizing:"border-box"}});function bt(e){const t=f.exports.useRef(null),i=yt();return f.exports.useEffect(()=>{ie(t,e.uiScale,n=>{n.strokeStyle="black",n.beginPath();const a=Ye(e.gridSize);for(const s of a){const r=Ce(s,e.gridSize);J(n,w(r[5],L(e.gridDimensions,.5)));for(const c of r)ee(n,w(c,L(e.gridDimensions,.5)))}n.stroke()})},[e.gridSize,t,e.uiScale,e.gridDimensions]),l("canvas",{ref:t,width:e.gridDimensions.x*e.uiScale,height:e.gridDimensions.y*e.uiScale,className:i.canvas,"data-testid":"field-canvas"})}const pt=M({canvas:{position:"absolute",zIndex:3,pointerEvents:"none",border:"5px solid transparent",boxSizing:"border-box"}});function xt(e){const t=f.exports.useRef(null),i=pt();return f.exports.useEffect(()=>{ie(t,e.uiScale,n=>{var a;n.strokeStyle="grey",n.lineWidth=G(e.gridSize),n.lineCap="round",n.beginPath();for(const s of e.ships){const r=Z(s,e.gridSize),c=j(s.facing),o=w(s,L(c,s.size-1)),d=Z(o,e.gridSize);J(n,w(r,L(e.gridDimensions,.5))),ee(n,w(d,L(e.gridDimensions,.5)))}if(n.stroke(),(a=e.mines)==null?void 0:a.length){n.strokeStyle="black",n.fillStyle="black",n.lineWidth=1,n.lineCap="butt",n.beginPath();const s=16,r=Math.PI*2/s;for(const c of e.mines){const o=Z(c,e.gridSize),d=[];for(let m=0;m<s;m++){const u=m*r,h=G(e.gridSize)*(m%2?.3:.8);d.push(w(o,{x:Math.cos(u)*h,y:Math.sin(u)*h},L(e.gridDimensions,.5)))}J(n,d[s-1]);for(const m of d)ee(n,m)}n.fill()}})},[e.ships,e.mines,t,e.uiScale,e.gridDimensions,e.gridSize]),l("canvas",{ref:t,width:e.gridDimensions.x*e.uiScale,height:e.gridDimensions.y*e.uiScale,className:i.canvas,"data-testid":"ships-canvas"})}const kt=M({canvas:{position:"absolute",zIndex:4,pointerEvents:"none",border:"5px solid transparent",boxSizing:"border-box"}});function vt(e){const t=f.exports.useRef(null),i=kt();return f.exports.useEffect(()=>{ie(t,e.uiScale,n=>{n.strokeStyle="black";for(const a of e.markers){n.fillStyle=a.type===R.Hit?"red":"white",n.beginPath();const s=w(Z(a,e.gridSize),L(e.gridDimensions,.5));n.arc(s.x,s.y,G(e.gridSize)*.4,0,Math.PI*2),n.stroke(),n.fill()}})},[e.markers,t,e.uiScale,e.gridDimensions,e.gridSize]),l("canvas",{ref:t,width:e.gridDimensions.x*e.uiScale,height:e.gridDimensions.y*e.uiScale,className:i.canvas,"data-testid":"marker-canvas"})}const Ct=M({canvas:{position:"absolute",zIndex:2,border:"5px solid transparent",boxSizing:"border-box"}});function wt(e){const t=f.exports.useRef(null),[i,n]=f.exports.useState(null),[a,s]=f.exports.useState(void 0),r=Ct();f.exports.useEffect(()=>{ie(t,e.uiScale,u=>{const h=(y,k)=>{const O=Ce(y,e.gridSize);u.fillStyle=k,u.beginPath(),J(u,w(O[5],L(e.gridDimensions,.5)));for(const D of O)ee(u,w(D,L(e.gridDimensions,.5)));u.fill()};if(e.overlayStyle&&(t==null?void 0:t.current)&&(u.fillStyle=e.overlayStyle,u.fillRect(0,0,999999,999999)),i&&a&&h(i,a),e.highlightTiles)for(const y of e.highlightTiles)h(y,y.style)})},[t,e.highlightTiles,i,a,e.uiScale,e.gridDimensions,e.overlayStyle,e.gridSize]);const c=u=>{const h=u.target.getBoundingClientRect(),y=w(L({x:u.clientX,y:u.clientY},1/e.uiScale),L(e.gridDimensions,-.5),L(h,-1/e.uiScale));return Xe(y,e.gridSize)},o=u=>{const h=c(u);B(h,e.gridSize)&&e.onSelectTile&&e.onSelectTile(h)},d=u=>{const h=c(u);n(B(h,e.gridSize)?h:null),s(e.mouseHighlightStyle?e.mouseHighlightStyle(h):void 0)},m=()=>{n(null)};return l("canvas",{ref:t,width:e.gridDimensions.x*e.uiScale,height:e.gridDimensions.y*e.uiScale,className:r.canvas,onClick:o,onMouseMove:d,onMouseLeave:m,"data-testid":"interaction-canvas"})}const zt=M({board:{position:"relative",width:"100%",maxHeight:"100%",aspectRatio:.86,overflow:"hidden","@media (max-width: 640px)":{maxWidth:"100%",height:"100%"},gridArea:e=>e.gridArea}});function he(e){var r,c;const t=f.exports.useRef(null),[i,n]=f.exports.useState(0),a=zt(e);f.exports.useEffect(()=>{const o=()=>{var d,m;n(Math.min((((d=t==null?void 0:t.current)==null?void 0:d.clientWidth)||0)/420,(((m=t==null?void 0:t.current)==null?void 0:m.clientHeight)||0)/500))};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[t]);const s=je(e.gridSize);return g("div",{className:a.board,ref:t,children:[l(bt,{gridSize:e.gridSize,uiScale:i,gridDimensions:s}),(!!((r=e.highlightTiles)==null?void 0:r.length)||e.onSelectTile||e.mouseHighlightStyle)&&l(wt,{gridSize:e.gridSize,onSelectTile:e.onSelectTile,highlightTiles:e.highlightTiles,mouseHighlightStyle:e.mouseHighlightStyle,uiScale:i,gridDimensions:s,overlayStyle:e.overlayStyle}),!!(e.ships||e.mines)&&l(xt,{ships:e.ships||[],mines:e.mines||[],uiScale:i,gridDimensions:s,gridSize:e.gridSize}),!!((c=e.markers)==null?void 0:c.length)&&l(vt,{markers:e.markers,uiScale:i,gridDimensions:s,gridSize:e.gridSize})]})}const le=640,Nt=M({container:{display:"inline-block",[`@media (max-width: ${le}px)`]:{width:"100%"}},panel:{margin:0,padding:0,listStyleType:"none",width:"100%"},shipList:{display:"grid",gridTemplateRows:"repeat(6, 1fr)",[`@media (max-width: ${le}px)`]:{gridTemplateRows:"repeat(2, 1fr)",gridTemplateColumns:"repeat(3, 1fr)"}},ship:{border:"2px solid black",background:"transparent",color:C,cursor:"pointer",textAlign:"left",boxSizing:"border-box",margin:{bottom:5},padding:{left:10,right:10,top:5,bottom:5},"@media (max-width: 560px)":{padding:{left:4,right:4,top:2,bottom:2}},"& div":{fontSize:"1.5rem","@media (max-width: 560px)":{fontSize:"1.1rem"}},"& span":{fontSize:"1rem",display:"inline-block","@media (max-width: 560px)":{fontSize:"0.8rem"}}},selectedShip:{backgroundColor:"#0050d4"},mines:{color:C,fontSize:"1.5rem",fontFamily:"sans-serif"},placedShip:{borderColor:C},actionContainer:{display:"flex",justifyContent:"space-between"},actionButton:x(p({},Q),{[`@media (max-width: ${le}px)`]:{alignSelf:"stretch",fontSize:"1rem"}})});function Mt(e){const t=Nt();return g("div",{className:t.container,children:[e.mines===void 0?l("div",{className:t.shipList,children:e.ships.map(i=>g("button",{onClick:()=>e.onSelected(i.id),className:`${t.ship} ${i.id===e.selectedId?t.selectedShip:""} ${e.placedIds.indexOf(i.id)===-1?"":t.placedShip}`,children:[l("div",{children:i.name}),g("span",{children:["Size: ",i.size]})]},i.id))}):g("p",{className:t.mines,children:[e.mines," Mine",e.mines===1?"":"s"," remaining"]}),g("div",{className:t.actionContainer,children:[e.mines===void 0&&l("button",{className:t.actionButton,onClick:e.onRotated,disabled:!e.canRotate,children:"Rotate"}),l("button",{className:t.actionButton,onClick:e.onConfirm,disabled:!e.placementValid,children:"Confirm"})]})]})}const Tt=M({wrapper:{display:"grid",gridTemplateColumns:"5fr 1fr",gridTemplateRows:"100%",width:"100%",height:"100%",columnGap:"10px","@media (max-width: 640px)":{gridTemplateColumns:"100%",gridTemplateRows:"5fr 1fr",rowGap:"10px"}}});function Pt(e){const[t,i]=f.exports.useState([]),[n,a]=f.exports.useState([]),[s,r]=f.exports.useState(void 0),[c,o]=f.exports.useState(void 0),[d,m]=f.exports.useState(0),u=Tt(),h=Object.values(t);(s==null?void 0:s.ship)&&h.push(s.ship);const y=!!(s==null?void 0:s.ship)&&we(s.ship,Object.values(t),e.gameSettings.gridSize),k=d===0?h.length===e.gameSettings.ships.length&&ue(h,e.gameSettings.gridSize):n.length===e.gameSettings.mines,O=y?"green":"red",D=c?[{x:c.x,y:c.y,style:O}]:[],W=d===1?e.gameSettings.mines-n.length:void 0,H=v=>{if(v!==(s==null?void 0:s.id)){const P=p({},t);(s==null?void 0:s.ship)&&(P[s.id]=s.ship),t[v]?(r({id:v,ship:t[v]}),o(t[v]),delete P[v]):(r({id:v,ship:void 0}),o(void 0)),i(P)}},S=()=>{(s==null?void 0:s.ship)&&r({id:s.id,ship:x(p({},s.ship),{facing:(s.ship.facing+1)%6})})},T=()=>{k&&(d===1||e.gameSettings.mines===0?e.onFleetPlaced({ships:h,mines:n}):(m(1),o(void 0)))},E=v=>{if(s){if(s.ship)r({id:s.id,ship:x(p({},s.ship),{x:v.x,y:v.y})});else{const P=e.gameSettings.ships.find($=>$.id===s.id);P&&r({id:s.id,ship:{x:v.x,y:v.y,size:P.size,facing:me.positiveX,hits:0,name:P.name,definitionId:P.id}})}o(v)}},ne=v=>{if(!h.map(q).flat().some($=>z($,v))){const $=n.findIndex(A=>z(A,v));if($===-1)n.length<e.gameSettings.mines&&a([...n,v]);else{const A=[...n];A.splice($,1),a(A)}}},se=v=>{d===0?E(v):d===1&&ne(v)},ae=()=>(s==null?void 0:s.id)||d===1?"orange":void 0;return g("div",{className:u.wrapper,children:[l(he,{gridSize:e.gameSettings.gridSize,ships:h,mines:n,onSelectTile:se,highlightTiles:D,mouseHighlightStyle:ae}),l(Mt,{ships:e.gameSettings.ships,mines:W,placedIds:Object.keys(t).map(Number),selectedId:s==null?void 0:s.id,placementValid:k,canRotate:!!s,onSelected:H,onRotated:S,onConfirm:T})]})}const Bt=M({statusPanel:{position:"relative",padding:{top:10,left:10,right:10,bottom:60},boxSizing:"border-box",minHeight:90,width:"100%",maxWidth:200,gridArea:"panel","@media (max-width: 640px)":{padding:0},display:"grid",gridTemplateColumns:"100%",gridTemplateRows:"repeat(7, 1fr)"},info:{fontFamily:_,color:C,fontSize:"2rem",margin:0,"@media (max-width: 640px)":{fontSize:"1rem"}},enemyShipHeader:{fontFamily:_,color:C,fontSize:"1.6rem",margin:{top:10,bottom:0},"@media (max-width: 640px)":{fontSize:"0.8rem"}},enemyShips:{display:"grid",gridTemplateColumns:"100%",gridTemplateRows:"repeat(6, 1fr)","@media (max-width: 640px)":{gridTemplateColumns:"1fr 1fr",gridTemplateRows:"repeat(3, 1fr)"}},enemyShip:{border:"2px solid black",color:C,fontFamily:"sans-serif",fontSize:"1.2rem",position:"relative",padding:4,margin:{top:5},"@media (max-width: 640px)":{fontSize:"0.6rem",padding:2}},enemyShipSunk:{border:"2px solid red","&:after":{width:"100%",height:"100%",display:"inline-block",position:"absolute",top:0,left:0,content:'""',background:"linear-gradient(10deg, transparent 47%, red 47%, red 53%, transparent 53%), linear-gradient(170deg, transparent 47%, red 47%, red 53%, transparent 53%)"}},fire:{border:"2px solid #ccc",cursor:"pointer",color:"white",fontSize:"1.5rem",textShadow:"1px 1px 0 black",background:"radial-gradient(#ff8000, #ff0000)",textTransform:"uppercase","&:hover":{background:"radial-gradient(#ffa447, #ff4747)"},"&:disabled":{color:"#aaa",background:"#777",cursor:"default"}},shotsRemaining:{color:C,fontFamily:"sans-serif",fontSize:"1.2rem","@media (max-width: 640px)":{fontSize:"0.6rem"}}});function Ht(e){var i;const t=Bt();return g("div",{className:t.statusPanel,children:[e.statusMessage&&l("p",{className:t.info,children:e.statusMessage}),((i=e.ships)==null?void 0:i.length)&&g(F,{children:[l("p",{className:t.enemyShipHeader,children:"Enemy Ships"}),g("div",{className:t.enemyShips,children:[e.ships.map(n=>g("div",{className:`${t.enemyShip} ${e.sunkShipIds&&e.sunkShipIds.indexOf(n.id)!==-1?t.enemyShipSunk:""}`,children:[n.name," (",n.size,")"]},n.id)),e.fireButtonVisible&&g(F,{children:[l("button",{className:t.fire,onClick:e.onFireClick,disabled:!e.fireButtonEnabled,children:"Fire"}),!!e.shotsRemaining&&g("p",{className:t.shotsRemaining,children:[e.shotsRemaining," shot",e.shotsRemaining===1?"":"s"," remaining"]})]})]})]})]})}const It=M({wrapper:{display:"grid",gridTemplateRows:"100%",gridTemplateColumns:"4fr 4fr 1fr",width:"100%",height:"100%",gridTemplateAreas:'"friend enemy panel"',"@media (max-width: 640px)":{gridTemplateColumns:"8fr 1fr",gridTemplateRows:"4fr 3fr",gridTemplateAreas:'"enemy enemy" "friend panel"'}},menuButton:{position:"absolute",left:10,top:10,zIndex:10,border:"2px solid white",background:"#333",color:C,fontSize:"1rem"}});function Lt(e){const[t,i]=f.exports.useState(void 0),[n,a]=f.exports.useState(0),[s,r]=f.exports.useState([]),[c,o]=f.exports.useState(!1),[d,m]=f.exports.useState([]),[u,h]=f.exports.useState([]),y=It(),k=e.gameInterface.getSettings();f.exports.useEffect(()=>{const b=N=>{var ye;i(x(p({},N),{ownMarkers:N.ownMarkers.slice(0),opponentMarkers:N.opponentMarkers.slice(0),ownShips:N.ownShips.slice(0),isOwnTurn:N.isOwnTurn,sunkEnemies:N.sunkEnemies.slice(0)}));const V=N.opponentMarkers.length-d.length;V>0&&(h(N.opponentMarkers.slice(-V)),m([...N.opponentMarkers]));let U=0;N.gameWon||N.gameLost?U=3:((ye=N.ownShips)==null?void 0:ye.length)&&(N.opponentShipsPlaced?U=2:U=1),a(U)};return e.gameInterface.onStateChange(b),()=>{e.gameInterface.offStateChange(b)}},[e.gameInterface,t,d.length]);const O=b=>{e.gameInterface.setFleet(b)},D=b=>!(t==null?void 0:t.ownMarkers.some(N=>z(b,N))),W=(t==null?void 0:t.isOwnTurn)&&n===2,H=t?fe(k,t):0,S=b=>{if(W&&D(b)){const N=s.findIndex(V=>z(V,b));if(N===-1)H===1?r([b]):s.length<H&&r([...s,b]);else{const V=[...s];V.splice(N,1),r(V)}}},T=b=>W&&D(b)?"orange":void 0,E=()=>{s.length===H&&s.every(b=>D(b))&&(e.gameInterface.fireShots(s),r([]))},ne=()=>{o(!0)},se=()=>{e.gameInterface.leaveGame(),e.onExit()},ae=()=>{o(!1)},v=u.map(b=>({x:b.x,y:b.y,style:"orange"}));let P;n===2?P=(t==null?void 0:t.isOwnTurn)?"Take your shot":"Enemy's turn":n===3?(t==null?void 0:t.opponentLeft)?P="Your opponent left":P=`You have ${(t==null?void 0:t.gameWon)?"Won":"Lost"}`:n===1&&(P="Enemy placing ships");let $;(t==null?void 0:t.gameWon)?$=t.ownMarkers.filter(b=>b.type===R.Hit).map(b=>({x:b.x,y:b.y,style:"red"})):$=s.map(b=>({x:b.x,y:b.y,style:"red"}));let A;(t==null?void 0:t.gameWon)?A="rgba(0, 255, 0, 0.3)":(t==null?void 0:t.gameLost)&&(A="rgba(255, 0, 0, 0.3)");const Ie=W&&(k.shots>1||k.shotPerShip)?H-s.length:void 0;return g(F,{children:[c&&l(Be,{onOk:se,onClose:ae,okButton:!0,cancelButton:!0,children:"Are you sure you want to end the game?"}),l("button",{className:y.menuButton,onClick:ne,children:"Menu"}),n===0?l(Pt,{gameSettings:k,onFleetPlaced:O}):g("div",{className:y.wrapper,children:[l(he,{gridSize:k.gridSize,ships:t==null?void 0:t.ownShips,mines:t==null?void 0:t.ownMines,markers:t==null?void 0:t.opponentMarkers,highlightTiles:v,gridArea:"friend",overlayStyle:A}),l(he,{gridSize:k.gridSize,ships:t==null?void 0:t.opponentShips,mines:t==null?void 0:t.opponentMines,markers:t==null?void 0:t.ownMarkers,onSelectTile:S,highlightTiles:$,mouseHighlightStyle:T,gridArea:"enemy",overlayStyle:A}),l(Ht,{statusMessage:P,ships:n===1?void 0:k.ships,sunkShipIds:t==null?void 0:t.sunkEnemies,fireButtonVisible:n===2,fireButtonEnabled:!!(s.length===H&&(t==null?void 0:t.isOwnTurn)),shotsRemaining:Ie,onFireClick:E})]})]})}const Ft=M({container:{backgroundColor:"#022866",width:"100%",height:"100%",overflow:"auto"}});function Ot(){const[e,t]=f.exports.useState(null),[i,n]=f.exports.useState(!1),[a,s]=f.exports.useState(void 0),r=Ft();f.exports.useEffect(()=>{const d=Ge();s(d),d.on("connect",()=>{n(!0)})},[]);const c=d=>{t(d)},o=()=>{t(null)};return l("div",{className:r.container,children:e?l(Lt,{gameInterface:e,onExit:o}):l(St,{onNewGame:c,socket:a,isConnected:i})})}ke.setAppElement("#root");De.render(l($e.StrictMode,{children:l(Ot,{})}),document.getElementById("root"));
